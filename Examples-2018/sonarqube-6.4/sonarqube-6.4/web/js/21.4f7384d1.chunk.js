webpackJsonp([21],{58:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function l(){return u}Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var a=n(1),o=r(a),u=o.default.createElement("i",{className:"spinner spinner-margin"})},261:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(1),a=r(l),o=n(37),u=r(o),c=n(59),i=n(16),s=function(e){var t=e.component,n=e.metric,r=e.onBrowse,l=function(e){e.preventDefault(),e.target.blur(),r(t)},o=void 0;o=r?a.default.createElement("a",{id:"component-measures-breadcrumb-"+t.key,href:"#",onClick:l},t.name):a.default.createElement("span",null,t.name);var s=(0,c.isDiffMetric)(n)?(0,c.formatLeak)(t.leak,n):(0,i.formatMeasure)(t.value,n.type);return a.default.createElement("span",null,a.default.createElement(u.default,{qualifier:t.qualifier})," ",o,null!=s&&a.default.createElement("span",null," ("+s+")"))};t.default=s},262:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(1),a=r(l),o=n(261),u=r(o),c=function(e){var t=e.breadcrumbs,n=e.metric,r=e.onBrowse;return a.default.createElement("ul",{className:"component-measures-breadcrumbs"},t.map(function(e,l){return a.default.createElement("li",{key:e.key},a.default.createElement(u.default,{component:e,metric:n,onBrowse:l+1<t.length?r:null}))}))};t.default=c},263:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(1),a=r(l),o=n(12),u=r(o),c=n(37),i=r(c),s=n(69),f=n(20),d=a.default.createElement("span",{className:"big-spacer-right"},a.default.createElement("i",{className:"icon-detach"})),m=function(e){var t=e.component,n=e.isSelected,r=e.onClick,l=(0,u.default)("link-no-underline",{selected:n}),o=function(e){var t=0===e.button,n=!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey);t&&!n&&(e.preventDefault(),r())},c="",m=t.name;if(["DIR","FIL","UTS"].includes(t.qualifier)){var p=(0,s.splitPath)(t.path);c=p.head,m=p.tail}var h=a.default.createElement("span",{title:t.refKey||t.key},a.default.createElement(i.default,{qualifier:t.qualifier})," ",c.length>0&&a.default.createElement("span",{className:"note"},c,"/"),a.default.createElement("span",null,m));return a.default.createElement("td",{style:{maxWidth:0}},a.default.createElement("div",{style:{maxWidth:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},null==t.refId||"DEV_PRJ"===t.qualifier?a.default.createElement("a",{id:"component-measures-component-link-"+t.key,className:l,href:(0,f.getComponentUrl)(t.key),onClick:o},h):a.default.createElement("a",{id:"component-measures-component-link-"+t.key,className:l,href:(0,f.getComponentUrl)(t.refKey||t.key)},d,h)))};t.default=m},264:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(1),a=r(l),o=n(265),u=r(o),c=n(266),i=r(c),s=n(203),f=r(s),d=n(2),m=a.default.createElement(i.default,null),p=a.default.createElement("th",null," "),h=function(e){var t=e.components,n=e.metrics,r=e.selected,l=e.metric,o=e.onClick;if(!t.length)return m;var c=(f.default[l.key]||[]).map(function(e){return n.find(function(t){return t.key===e})});return a.default.createElement("table",{className:"data zebra zebra-hover"},c.length>0&&a.default.createElement("thead",null,a.default.createElement("tr",null,p,a.default.createElement("th",{className:"text-right"},a.default.createElement("span",{className:"small"},(0,d.getLocalizedMetricName)(l))),c.map(function(e){return a.default.createElement("th",{key:e.key,className:"text-right"},a.default.createElement("span",{className:"small"},(0,d.getLocalizedMetricName)(e)))}))),a.default.createElement("tbody",null,t.map(function(e){return a.default.createElement(u.default,{key:e.id,component:e,otherMetrics:c,isSelected:e===r,metric:l,onClick:o})})))};t.default=h},265:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(1),a=r(l),o=n(263),u=r(o),c=n(268),i=r(c),s=function(e,t){return Object.assign({},e,{value:t.value,leak:t.leak})},f=function(e){var t=e.component,n=e.otherMetrics,r=e.isSelected,l=e.metric,o=e.onClick,c=function(){o(t)},f=n.map(function(e){var n=t.measures.find(function(t){return t.metric===e.key});return Object.assign({},n,{metric:e})});return a.default.createElement("tr",null,a.default.createElement(u.default,{component:t,isSelected:r,onClick:c.bind(void 0,t)}),a.default.createElement(i.default,{component:t,metric:l}),f.map(function(e){return a.default.createElement(i.default,{key:e.metric.key,component:s(t,e),metric:e.metric})}))};t.default=f},266:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(1),a=r(l),o=n(2),u=function(){return a.default.createElement("div",{className:"note"},(0,o.translate)("no_results"))};t.default=u},267:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(1),a=r(l),o=n(262),u=r(o),c=n(2),i=function(e){var t=e.metric,n=e.breadcrumbs,r=e.onBrowse,l=e.selectedIndex,o=e.componentsCount,i=e.onSelectPrevious,s=e.onSelectNext,f=l>0,d=l<o-1,m=function(e){return function(t){t.target.blur(),e()}};return a.default.createElement("header",{className:"measure-details-viewer-header"},null!=n&&n.length>1&&a.default.createElement("div",{className:"measure-details-header-container"},a.default.createElement(u.default,{breadcrumbs:n,metric:t,onBrowse:r})),null!=l&&l!==-1&&a.default.createElement("div",{className:"pull-right"},a.default.createElement("span",{className:"note spacer-right"},(0,c.translateWithParameters)("component_measures.x_of_y",l+1,o)),a.default.createElement("div",{className:"button-group"},f&&a.default.createElement("button",{onClick:m(i)},"<"),d&&a.default.createElement("button",{onClick:m(s)},">"))))};t.default=i},268:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(1),a=r(l),o=n(97),u=r(o),c=function(e){var t=e.component,n=e.metric;return a.default.createElement("td",{className:"thin nowrap text-right"},a.default.createElement("span",{id:"component-measures-component-measure-"+t.key+"-"+n.key},a.default.createElement(u.default,{measure:{value:t.value,leak:t.leak},metric:n})))};t.default=c},855:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),i=r(c),s=n(12),f=r(s),d=n(6),m=r(d),p=n(264),h=r(p),v=n(267),y=r(v),b=n(58),E=r(b),k=n(98),_=r(k),g=n(77),M=r(g),w=i.default.createElement(E.default,null),N=function(e){function t(){return l(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.component,n=e.metric;if("DEV"===t.qualifier){var r=this.context.router;r.replace({pathname:"metric/"+n.key+"/tree",query:{id:t.key}})}this.handleChangeBaseComponent(t)}},{key:"componentDidUpdate",value:function(e){e.metric!==this.props.metric&&this.handleChangeBaseComponent(this.props.component),this.props.selected?this.scrollToViewer():this.scrollTop&&this.scrollToStoredPosition()}},{key:"scrollToViewer",value:function(){var e=this.refs.container,t=e.getBoundingClientRect().top+window.scrollY-95-10;window.scrollY>t&&window.scrollTo(0,t)}},{key:"scrollToStoredPosition",value:function(){window.scrollTo(0,this.scrollTop),this.scrollTop=null}},{key:"storeScrollPosition",value:function(){this.scrollTop=window.scrollY}},{key:"handleChangeBaseComponent",value:function(e){var t=this.props,n=t.metric,r=t.onFetchList,l=this.props.location.query.period||1;r(e,n,Number(l))}},{key:"handleFetchMore",value:function(){var e=this.props.location.query.period||1;this.props.onFetchMore(Number(e))}},{key:"changeSelected",value:function(e){this.props.onSelect(e)}},{key:"handleClick",value:function(e){this.storeScrollPosition(),this.props.onSelect(e)}},{key:"handleBreadcrumbClick",value:function(){this.props.onSelect(void 0)}},{key:"render",value:function(){var e=this.props,t=e.component,n=e.components,r=e.metrics,l=e.metric,a=e.leakPeriod,o=e.selected,u=e.total,c=e.fetching,s=this.props,d=s.onSelectNext,p=s.onSelectPrevious,v=[t];o&&v.push(o);var b=n.indexOf(o),E=0===l.key.indexOf("new_")&&a?a:null,k=null!=E?(0,m.default)(E.date).toDate():null,g=null!=k?function(e){if(e.scmDate){var t=(0,m.default)(e.scmDate).toDate();return t>=k}return!1}:void 0;return i.default.createElement("div",{ref:"container",className:"measure-details-plain-list"},i.default.createElement(y.default,{metric:l,breadcrumbs:v,componentsCount:n.length,selectedIndex:b,onSelectPrevious:p,onSelectNext:d,onBrowse:this.handleBreadcrumbClick.bind(this)}),!o&&i.default.createElement("div",{className:(0,f.default)({"new-loading":c})},c&&0===n.length?w:i.default.createElement("div",null,i.default.createElement(h.default,{components:n,metrics:r,selected:o,metric:l,onClick:this.handleClick.bind(this)}),i.default.createElement(M.default,{count:n.length,total:u,loadMore:this.handleFetchMore.bind(this)}))),!!o&&i.default.createElement("div",{className:"measure-details-viewer"},i.default.createElement(_.default,{component:o.key,filterLine:g})))}}]),t}(i.default.PureComponent);N.contextTypes={router:i.default.PropTypes.object.isRequired},t.default=N},856:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(7),a=n(855),o=r(a),u=n(429),c=n(8),i=function(e){return{components:(0,c.getMeasuresAppListComponents)(e),selected:(0,c.getMeasuresAppListSelected)(e),total:(0,c.getMeasuresAppListTotal)(e),pageIndex:(0,c.getMeasuresAppListPageIndex)(e),component:(0,c.getMeasuresAppComponent)(e),metrics:(0,c.getMeasuresAppAllMetrics)(e),metric:(0,c.getMeasuresAppDetailsMetric)(e),fetching:(0,c.isMeasuresAppFetching)(e)}},s=function(e){return{onFetchList:function(t,n,r){return e((0,u.fetchList)(t,n,r))},onFetchMore:function(t){return e((0,u.fetchMore)(t))},onSelect:function(t){return e((0,u.selectComponent)(t))},onSelectNext:function(t){return e((0,u.selectNext)(t))},onSelectPrevious:function(t){return e((0,u.selectPrevious)(t))}}};t.default=(0,l.connect)(i,s)(o.default)}});