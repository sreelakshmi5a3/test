webpackJsonp([8],{96:function(e,t){"use strict"},416:function(e,t,a){"use strict";function n(e,t){return e.map(function(e){return e.id===t.id?t:e})}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return e.status===o.STATUSES.ALL?t.status=[o.STATUSES.PENDING,o.STATUSES.IN_PROGRESS,o.STATUSES.SUCCESS,o.STATUSES.FAILED,o.STATUSES.CANCELED].join():e.status===o.STATUSES.ALL_EXCEPT_PENDING?t.status=[o.STATUSES.IN_PROGRESS,o.STATUSES.SUCCESS,o.STATUSES.FAILED,o.STATUSES.CANCELED].join():t.status=e.status,e.taskType!==o.ALL_TYPES&&(t.type=e.taskType),e.currents!==o.CURRENTS.ALL&&(t.onlyCurrents=!0),e.minSubmittedAt&&(t.minSubmittedAt=e.minSubmittedAt),e.maxExecutedAt&&(t.maxExecutedAt=e.maxExecutedAt),e.query&&(t.componentQuery=e.query),1!==e.lastPage&&(t.p=e.lastPage),t}function l(e,t){return""+e+t}function s(e){if(!e)return"";if(e>=i){var t=Math.round(e/i);return l(t,"min")}if(e>=u){var a=Math.round(e/u);return l(a,"s")}return l(e,"ms")}Object.defineProperty(t,"__esModule",{value:!0}),t.updateTask=n,t.mapFiltersToParameters=r,t.formatDuration=s;var o=a(74),u=(a(96),1e3),i=60*u},771:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){var a=[],n=!0,r=!1,l=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(a.push(s.value),!t||a.length!==t);n=!0);}catch(u){r=!0,l=u}finally{try{!n&&o.return&&o.return()}finally{if(r)throw l}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=a(1),c=n(i),d=a(15),f=n(d),p=a(4),h=a(7),m=a(74),b=a(775),y=n(b),k=a(774),E=n(k),g=a(777),v=n(g),_=a(776),S=n(_),T=a(788),C=n(T),A=a(200),N=a(416),P=(a(96),a(8));a(1904);var O=a(48),j=a(2),w=c.default.createElement("div",{className:"page"},c.default.createElement("i",{className:"spinner"})),x=c.default.createElement(y.default,null),R=function(e){function t(){var e,a,n,s;r(this,t);for(var o=arguments.length,u=Array(o),i=0;i<o;i++)u[i]=arguments[i];return a=n=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),n.state={loading:!0,tasks:[],query:"",pendingCount:0,failingCount:0},s=a,l(n,s)}return s(t,e),u(t,[{key:"componentWillMount",value:function(){this.loadTasksDebounced=(0,p.debounce)(this.loadTasks.bind(this),m.DEBOUNCE_DELAY)}},{key:"componentDidMount",value:function(){var e=this;this.mounted=!0,(0,A.getTypes)().then(function(t){e.setState({types:t}),e.loadTasks()})}},{key:"componentDidUpdate",value:function(e){e.component===this.props.component&&e.location===this.props.location||this.loadTasksDebounced()}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"loadTasks",value:function(){var e=this;this.setState({loading:!0});var t=this.props.location.query.status||m.DEFAULT_FILTERS.status,a=this.props.location.query.taskType||m.DEFAULT_FILTERS.taskType,n=this.props.location.query.currents||m.DEFAULT_FILTERS.currents,r=this.props.location.query.minSubmittedAt||m.DEFAULT_FILTERS.minSubmittedAt,l=this.props.location.query.maxExecutedAt||m.DEFAULT_FILTERS.maxExecutedAt,s=this.props.location.query.query||m.DEFAULT_FILTERS.query,u={status:t,taskType:a,currents:n,minSubmittedAt:r,maxExecutedAt:l,query:s},i=(0,N.mapFiltersToParameters)(u);this.props.component&&(i.componentId=this.props.component.id),Promise.all([(0,A.getActivity)(i),(0,A.getStatus)(i.componentId)]).then(function(t){if(e.mounted){var a=o(t,2),n=a[0],r=a[1],l=n.tasks,s=r.pending,u=r.failing,i=(0,p.uniq)(l.map(function(e){return e.organization}).filter(function(e){return e}));e.props.fetchOrganizations(i),e.setState({tasks:l,pendingCount:s,failingCount:u,loading:!1})}})}},{key:"handleFilterUpdate",value:function(e){var t=Object.assign({},this.props.location.query,e);Object.keys(m.DEFAULT_FILTERS).forEach(function(e){t[e]===m.DEFAULT_FILTERS[e]&&delete t[e]}),this.context.router.push({pathname:this.props.location.pathname,query:t})}},{key:"handleCancelTask",value:function(e){var t=this;this.setState({loading:!0}),(0,A.cancelTask)(e.id).then(function(e){if(t.mounted){var a=(0,N.updateTask)(t.state.tasks,e);t.setState({tasks:a,loading:!1})}})}},{key:"handleFilterTask",value:function(e){this.handleFilterUpdate({query:e.componentKey})}},{key:"handleShowFailing",value:function(){this.handleFilterUpdate(Object.assign({},m.DEFAULT_FILTERS,{status:m.STATUSES.FAILED,currents:m.CURRENTS.ONLY_CURRENTS}))}},{key:"handleCancelAllPending",value:function(){var e=this;this.setState({loading:!0}),(0,A.cancelAllTasks)().then(function(){e.mounted&&e.loadTasks()})}},{key:"render",value:function(){var e=this.props.component,t=this.state,a=t.loading,n=t.types,r=t.tasks,l=t.pendingCount,s=t.failingCount;if(!n)return w;var o=this.props.location.query.status||m.DEFAULT_FILTERS.status,u=this.props.location.query.taskType||m.DEFAULT_FILTERS.taskType,i=this.props.location.query.currents||m.DEFAULT_FILTERS.currents,d=this.props.location.query.minSubmittedAt||"",p=this.props.location.query.maxExecutedAt||"",h=this.props.location.query.query||"";return c.default.createElement("div",{className:"page page-limited"},c.default.createElement(f.default,{title:(0,j.translate)("background_tasks.page")}),x,c.default.createElement(v.default,{component:e,pendingCount:l,failingCount:s,onShowFailing:this.handleShowFailing.bind(this),onCancelAllPending:this.handleCancelAllPending.bind(this)}),c.default.createElement(S.default,{loading:a,component:e,status:o,currents:i,minSubmittedAt:d,maxExecutedAt:p,query:h,taskType:u,types:n,onFilterUpdate:this.handleFilterUpdate.bind(this),onReload:this.loadTasksDebounced}),c.default.createElement(C.default,{loading:a,component:e,types:n,tasks:r,onCancelTask:this.handleCancelTask.bind(this),onFilterTask:this.handleFilterTask.bind(this)}),c.default.createElement(E.default,{tasks:r}))}}]),t}(c.default.PureComponent);R.contextTypes={router:c.default.PropTypes.object.isRequired};var D=function(e,t){return{component:t.location.query.id?(0,P.getComponent)(e,t.location.query.id):void 0}},L={fetchOrganizations:O.fetchOrganizations};t.default=(0,h.connect)(D,L)(R)},772:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(1),l=n(r),s=a(100),o=n(s),u=a(74),i=function(e){function t(e){var t=e?u.CURRENTS.ONLY_CURRENTS:u.CURRENTS.ALL;r(t)}function a(e){var t=n===u.CURRENTS.ALL?u.CURRENTS.ONLY_CURRENTS:u.CURRENTS.ALL;e.preventDefault(),r(t)}var n=e.value,r=e.onChange,s=n===u.CURRENTS.ONLY_CURRENTS;return l.default.createElement("div",{className:"bt-search-form-field"},l.default.createElement(o.default,{checked:s,onCheck:t}),"Â ",l.default.createElement("label",{style:{cursor:"pointer"},role:"checkbox",tabIndex:"0","aria-checked":s?"true":"false",onClick:a},"Yes"))};t.default=i},773:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(14),i=n(u),c=a(6),d=n(c),f=a(1),p=n(f),h=a(74),m=function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),o(t,[{key:"componentDidMount",value:function(){this.attachDatePicker()}},{key:"componentDidUpdate",value:function(){this.attachDatePicker()}},{key:"attachDatePicker",value:function(){var e={dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,onSelect:this.handleChange.bind(this)};i.default.fn&&i.default.fn.datepicker&&((0,i.default)(this.refs.minDate).datepicker(e),(0,i.default)(this.refs.maxDate).datepicker(e))}},{key:"handleChange",value:function(){var e={},t=this.refs.minDate.value,a=this.refs.maxDate.value,n=(0,d.default)(t,h.DATE_FORMAT,!0),r=(0,d.default)(a,h.DATE_FORMAT,!0);n.isValid()&&(e.minSubmittedAt=n.format(h.DATE_FORMAT)),r.isValid()&&(e.maxExecutedAt=r.format(h.DATE_FORMAT)),this.props.onChange(e)}},{key:"render",value:function(){var e=this.props,t=e.minSubmittedAt,a=e.maxExecutedAt;return p.default.createElement("div",null,p.default.createElement("input",{className:"input-small",value:t,onChange:function(){return!0},ref:"minDate",type:"text",placeholder:"From"})," ",p.default.createElement("input",{className:"input-small",value:a,onChange:function(){return!0},ref:"maxDate",type:"text",placeholder:"To"}))}}]),t}(f.Component);t.default=m},774:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(1),l=n(r),s=(a(96),a(2)),o=1e3,u=function(e){var t=e.tasks;return t.length<o?null:l.default.createElement("footer",{className:"spacer-top note text-center"},(0,s.translateWithParameters)("max_results_reached",o))};t.default=u},775:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(1),l=n(r),s=a(2),o=function(){return l.default.createElement("header",{className:"page-header"},l.default.createElement("h1",{className:"page-title"},(0,s.translate)("background_tasks.page")),l.default.createElement("p",{className:"page-description"},(0,s.translate)("background_tasks.page.description")))};t.default=o},776:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(1),i=n(u),c=a(778),d=n(c),f=a(789),p=n(f),h=a(772),m=n(h),b=a(773),y=n(b),k=a(74),E=a(2),g=i.default.createElement("h6",{className:"bt-search-form-label"},"Search by Task or Component"),v=i.default.createElement("h6",{className:"bt-search-form-label"},"Status"),_=i.default.createElement("h6",{className:"bt-search-form-label"},"Type"),S=i.default.createElement("h6",{className:"bt-search-form-label"},"Only Latest Analysis"),T=i.default.createElement("h6",{className:"bt-search-form-label"},"Date"),C=function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),o(t,[{key:"handleStatusChange",value:function(e){this.props.onFilterUpdate({status:e})}},{key:"handleTypeChange",value:function(e){this.props.onFilterUpdate({taskType:e})}},{key:"handleCurrentsChange",value:function(e){this.props.onFilterUpdate({currents:e})}},{key:"handleDateChange",value:function(e){this.props.onFilterUpdate(e)}},{key:"handleQueryChange",value:function(e){this.props.onFilterUpdate({query:e})}},{key:"handleReload",value:function(e){e.target.blur(),this.props.onReload()}},{key:"handleReset",value:function(e){e.preventDefault(),e.target.blur(),this.props.onFilterUpdate(k.DEFAULT_FILTERS)}},{key:"renderSearchBox",value:function(){var e=this,t=this.props,a=t.component,n=t.query;return a?null:i.default.createElement("li",null,g,i.default.createElement("input",{onChange:function(t){return e.handleQueryChange(t.target.value)},value:n,ref:"searchInput",className:"js-search input-large",type:"search",placeholder:"Search"}))}},{key:"render",value:function(){var e=this.props,t=e.loading,a=e.component,n=e.types,r=e.status,l=e.taskType,s=e.currents,o=e.minSubmittedAt,u=e.maxExecutedAt;return i.default.createElement("section",{className:"big-spacer-top big-spacer-bottom"},i.default.createElement("ul",{className:"bt-search-form"},i.default.createElement("li",null,v,i.default.createElement(d.default,{value:r,onChange:this.handleStatusChange.bind(this)})),n.length>1&&i.default.createElement("li",null,_,i.default.createElement(p.default,{value:l,types:n,onChange:this.handleTypeChange.bind(this)})),!a&&i.default.createElement("li",null,S,i.default.createElement(m.default,{value:s,onChange:this.handleCurrentsChange.bind(this)})),i.default.createElement("li",null,T,i.default.createElement(y.default,{minSubmittedAt:o,maxExecutedAt:u,onChange:this.handleDateChange.bind(this)})),this.renderSearchBox(),i.default.createElement("li",{className:"bt-search-form-right"},i.default.createElement("button",{className:"js-reload",onClick:this.handleReload.bind(this),disabled:t},(0,E.translate)("reload"))," ",i.default.createElement("button",{ref:"resetButton",onClick:this.handleReset.bind(this),disabled:t},(0,E.translate)("reset_verb")))))}}]),t}(i.default.PureComponent);C.propTypes={loading:i.default.PropTypes.bool.isRequired,status:i.default.PropTypes.any.isRequired,taskType:i.default.PropTypes.any.isRequired,currents:i.default.PropTypes.any.isRequired,query:i.default.PropTypes.string.isRequired,onFilterUpdate:i.default.PropTypes.func.isRequired,onReload:i.default.PropTypes.func.isRequired},t.default=C},777:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(1),i=n(u),c=a(2),d=function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),o(t,[{key:"handleCancelAllPending",value:function(e){e.preventDefault(),e.target.blur(),this.props.onCancelAllPending()}},{key:"handleShowFailing",value:function(e){e.preventDefault(),e.target.blur(),this.props.onShowFailing()}},{key:"renderPending",value:function(){return null==this.props.pendingCount?null:this.props.pendingCount>0?i.default.createElement("span",null,i.default.createElement("span",{className:"js-pending-count emphasised-measure"},this.props.pendingCount),"Â ",(0,c.translate)("background_tasks.pending"),i.default.createElement("a",{onClick:this.handleCancelAllPending.bind(this),className:"js-cancel-pending icon-delete spacer-left",title:(0,c.translate)("background_tasks.cancel_all_tasks"),"data-toggle":"tooltip",href:"#"})):i.default.createElement("span",null,i.default.createElement("span",{className:"js-pending-count emphasised-measure"},this.props.pendingCount),"Â ",(0,c.translate)("background_tasks.pending"))}},{key:"renderFailures",value:function(){return null==this.props.failingCount?null:this.props.component?null:this.props.failingCount>0?i.default.createElement("span",null,i.default.createElement("a",{onClick:this.handleShowFailing.bind(this),className:"js-failures-count emphasised-measure","data-toggle":"tooltip",title:"Count of projects where processing of most recent analysis report failed",href:"#"},this.props.failingCount),"Â ",(0,c.translate)("background_tasks.failures")):i.default.createElement("span",null,i.default.createElement("span",{className:"js-failures-count emphasised-measure","data-toggle":"tooltip",title:"Count of projects where processing of most recent analysis report failed"},this.props.failingCount),"Â ",(0,c.translate)("background_tasks.failures"))}},{key:"render",value:function(){return i.default.createElement("section",{className:"big-spacer-top big-spacer-bottom"},i.default.createElement("span",null,this.renderPending()),i.default.createElement("span",{className:"huge-spacer-left"},this.renderFailures()))}}]),t}(i.default.PureComponent);t.default=d},778:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(1),l=n(r),s=a(33),o=n(s),u=a(74),i=a(2),c=function(e){var t=e.value,a=e.onChange,n=[{value:u.STATUSES.ALL,label:(0,i.translate)("background_task.status.ALL")},{value:u.STATUSES.ALL_EXCEPT_PENDING,label:(0,i.translate)("background_task.status.ALL_EXCEPT_PENDING")},{value:u.STATUSES.PENDING,label:(0,i.translate)("background_task.status.PENDING")},{value:u.STATUSES.IN_PROGRESS,label:(0,i.translate)("background_task.status.IN_PROGRESS")},{value:u.STATUSES.SUCCESS,label:(0,i.translate)("background_task.status.SUCCESS")},{value:u.STATUSES.FAILED,label:(0,i.translate)("background_task.status.FAILED")},{value:u.STATUSES.CANCELED,label:(0,i.translate)("background_task.status.CANCELED")}];return l.default.createElement(o.default,{value:t,onChange:function(e){return a(e.value)},className:"input-medium",options:n,clearable:!1,searchable:!1})};t.default=c},779:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(1),i=n(u),c=a(786),d=n(c),f=a(781),p=n(f),h=a(785),m=n(h),b=a(783),y=n(b),k=a(782),E=n(k),g=a(784),v=n(g),_=a(780),S=n(_),T=function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),o(t,[{key:"render",value:function(){var e=this.props,t=e.task,a=e.index,n=e.tasks,r=e.component,l=e.types,s=e.onCancelTask,o=e.onFilterTask,u=a>0?n[a-1]:null;return i.default.createElement("tr",null,i.default.createElement(d.default,{task:t}),i.default.createElement(p.default,{task:t,types:l}),i.default.createElement(m.default,{task:t}),i.default.createElement(y.default,{task:t,prevTask:u}),i.default.createElement(E.default,{date:t.submittedAt,baseDate:t.submittedAt,format:"LTS"}),i.default.createElement(E.default,{date:t.startedAt,baseDate:t.submittedAt,format:"LTS"}),i.default.createElement(E.default,{date:t.executedAt,baseDate:t.submittedAt,format:"LTS"}),i.default.createElement(v.default,{task:t}),i.default.createElement(S.default,{component:r,task:t,onFilterTask:o,onCancelTask:s}))}}]),t}(i.default.PureComponent);T.propTypes={task:i.default.PropTypes.object.isRequired,index:i.default.PropTypes.number.isRequired,tasks:i.default.PropTypes.array.isRequired,component:i.default.PropTypes.object,types:i.default.PropTypes.array.isRequired,onCancelTask:i.default.PropTypes.func.isRequired,onFilterTask:i.default.PropTypes.func.isRequired},t.default=T},780:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(1),i=n(u),c=a(791),d=n(c),f=a(792),p=n(f),h=a(74),m=a(2),b=i.default.createElement("td",null,"Â "),y=i.default.createElement("button",{className:"dropdown-toggle","data-toggle":"dropdown"},i.default.createElement("i",{className:"icon-dropdown"})),k=i.default.createElement("i",{className:"spacer-right icon-filter icon-gray"}),E=i.default.createElement("i",{className:"spacer-right icon-delete"}),g=i.default.createElement("i",{className:"spacer-right icon-list icon-gray"}),v=i.default.createElement("i",{className:"spacer-right icon-list icon-red"}),_=function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),o(t,[{key:"handleFilterClick",value:function(e){e.preventDefault(),this.props.onFilterTask(this.props.task)}},{key:"handleCancelClick",value:function(e){e.preventDefault(),this.props.onCancelTask(this.props.task)}},{key:"handleShowScannerContextClick",value:function(e){e.preventDefault(),new d.default({task:this.props.task}).render()}},{key:"handleShowStacktraceClick",value:function(e){e.preventDefault(),new p.default({task:this.props.task}).render()}},{key:"render",value:function(){var e=this.props,t=e.component,a=e.task,n=null==t,r=a.status===h.STATUSES.PENDING,l=null!=a.errorMessage,s=n||r||a.hasScannerContext||l;return s?i.default.createElement("td",{className:"thin nowrap"},i.default.createElement("div",{className:"dropdown js-task-action"},y,i.default.createElement("ul",{className:"dropdown-menu dropdown-menu-right"},n&&i.default.createElement("li",null,i.default.createElement("a",{className:"js-task-filter",href:"#",onClick:this.handleFilterClick.bind(this)},k,(0,m.translateWithParameters)("background_tasks.filter_by_component_x",a.componentName))),r&&i.default.createElement("li",null,i.default.createElement("a",{className:"js-task-cancel",href:"#",onClick:this.handleCancelClick.bind(this)},E,(0,m.translate)("background_tasks.cancel_task"))),a.hasScannerContext&&i.default.createElement("li",null,i.default.createElement("a",{className:"js-task-show-scanner-context",href:"#",onClick:this.handleShowScannerContextClick.bind(this)},g,(0,m.translate)("background_tasks.show_scanner_context"))),l&&i.default.createElement("li",null,i.default.createElement("a",{className:"js-task-show-stacktrace",href:"#",onClick:this.handleShowStacktraceClick.bind(this)},v,(0,m.translate)("background_tasks.show_stacktrace")))))):b}}]),t}(i.default.PureComponent);t.default=_},781:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.task,a=e.types;return t.componentKey?s.default.createElement("td",null,s.default.createElement("span",{className:"little-spacer-right"},s.default.createElement(d.default,{qualifier:t.componentQualifier})),null!=t.organization&&s.default.createElement(p.default,{organizationKey:t.organization}),s.default.createElement(o.Link,{to:{pathname:"/dashboard",query:{id:t.componentKey}}},t.componentName),a.length>1&&s.default.createElement(i.default,{task:t})):s.default.createElement("td",null,s.default.createElement("span",{className:"note"},t.id),a.length>1&&s.default.createElement(i.default,{task:t}))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var l=a(1),s=n(l),o=a(9),u=a(787),i=n(u),c=a(37),d=n(c),f=a(137),p=n(f);a(96)},782:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(6),l=n(r),s=a(1),o=n(s),u=function(e){var t=e.date,a=e.baseDate,n=e.format,r=(0,l.default)(t),s=(0,l.default)(a),u=t&&a?r.diff(s,"days"):0;return o.default.createElement("td",{className:"thin nowrap text-right"},u>0&&o.default.createElement("span",{className:"text-warning little-spacer-right"},"(+"+u+"d)"),t?(0,l.default)(t).format(n):"")};t.default=u},783:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return!(0,s.default)(e).isSame((0,s.default)(t),"day")}Object.defineProperty(t,"__esModule",{value:!0});var l=a(6),s=n(l),o=a(1),u=n(o),i=(a(96),function(e){var t=e.task,a=e.prevTask,n=!a||r(t.submittedAt,a.submittedAt);return u.default.createElement("td",{className:"thin nowrap text-right"},n?(0,s.default)(t.submittedAt).format("LL"):"")});t.default=i},784:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(1),l=n(r),s=a(416),o=(a(96),function(e){var t=e.task;return l.default.createElement("td",{className:"thin nowrap text-right"},(0,s.formatDuration)(t.executionTimeMs))});t.default=o},785:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(1),l=n(r),s=function(e){var t=e.task;return l.default.createElement("td",{className:"thin nowrap"},l.default.createElement("div",{className:"note"},t.id))};t.default=s},786:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(1),l=n(r),s=a(74),o=a(487),u=n(o),i=a(2),c=(a(96),l.default.createElement(u.default,null)),d=l.default.createElement("i",{className:"spinner"}),f=function(e){var t=e.task,a=void 0;switch(t.status){case s.STATUSES.PENDING:a=c;break;case s.STATUSES.IN_PROGRESS:a=d;break;case s.STATUSES.SUCCESS:a=l.default.createElement("span",{className:"badge badge-success"},(0,i.translate)("background_task.status.SUCCESS"));break;case s.STATUSES.FAILED:a=l.default.createElement("span",{className:"badge badge-danger"},(0,i.translate)("background_task.status.FAILED"));break;case s.STATUSES.CANCELED:a=l.default.createElement("span",{className:"badge badge-muted"},(0,i.translate)("background_task.status.CANCELED"));break;default:a=""}return l.default.createElement("td",{className:"thin spacer-right"},a)};t.default=f},787:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(1),l=n(r),s=(a(96),a(2)),o=function(e){var t=e.task;return l.default.createElement("span",{className:"note nowrap spacer-left"},"[",(0,s.translate)("background_task.type",t.type),"]")};t.default=o},788:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(1),i=n(u),c=a(12),d=n(c),f=a(779),p=n(f),h=a(2),m=i.default.createElement("th",null,"Â "),b=i.default.createElement("th",null,"Â "),y=function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),o(t,[{key:"render",value:function(){var e=this.props,t=e.tasks,a=e.component,n=e.types,r=e.loading,l=e.onCancelTask,s=e.onFilterTask,o=(0,d.default)("data zebra zebra-hover background-tasks",{"new-loading":r});return i.default.createElement("table",{className:o},i.default.createElement("thead",null,i.default.createElement("tr",null,i.default.createElement("th",null,(0,h.translate)("background_tasks.table.status")),i.default.createElement("th",null,(0,h.translate)("background_tasks.table.task")),i.default.createElement("th",null,(0,h.translate)("background_tasks.table.id")),m,i.default.createElement("th",{className:"text-right"},(0,h.translate)("background_tasks.table.submitted")),i.default.createElement("th",{className:"text-right"},(0,h.translate)("background_tasks.table.started")),i.default.createElement("th",{className:"text-right"},(0,h.translate)("background_tasks.table.finished")),i.default.createElement("th",{className:"text-right"},(0,h.translate)("background_tasks.table.duration")),b)),i.default.createElement("tbody",null,t.map(function(e,t,r){return i.default.createElement(p.default,{key:e.id,task:e,index:t,tasks:r,component:a,types:n,onCancelTask:l,onFilterTask:s})})))}}]),t}(i.default.PureComponent);t.default=y},789:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var l=a(1),s=n(l),o=a(33),u=n(o),i=a(74),c=a(2),d=function(e){var t=e.value,a=e.onChange,n=e.types,l=n.map(function(e){return{value:e,label:(0,c.translate)("background_task.type",e)}}),o=[{value:i.ALL_TYPES,label:(0,c.translate)("background_task.type.ALL")}].concat(r(l));return s.default.createElement(u.default,{value:t,onChange:function(e){return a(e.value)},className:"input-medium",options:o,clearable:!1,searchable:!1})};t.default=d},791:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(99),l=n(r),s=a(1610),o=n(s),u=a(200);t.default=l.default.extend({template:o.default,
className:"modal modal-large",initialize:function(){this.scannerContext=null,this.loadScannerContext()},loadScannerContext:function(){var e=this;(0,u.getTask)(this.options.task.id,["scannerContext"]).then(function(t){e.scannerContext=t.scannerContext,e.render()})},serializeData:function(){return{task:this.options.task,scannerContext:this.scannerContext}}})},792:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(99),l=n(r),s=a(1611),o=n(s),u=a(200);t.default=l.default.extend({template:o.default,className:"modal modal-large",initialize:function(){this.loaded=!1,this.stacktrace=null,this.loadStacktrace()},loadStacktrace:function(){var e=this;(0,u.getTask)(this.options.task.id,["stacktrace"]).then(function(t){e.loaded=!0,e.stacktrace=t.errorStacktrace,e.render()})},serializeData:function(){return{task:this.options.task,stacktrace:this.stacktrace,loaded:this.loaded}}})},1549:function(e,t,a){t=e.exports=a(22)(),t.push([e.id,".bt-search-form{display:flex;align-items:flex-start}.bt-search-form>li+li{margin-left:40px}.bt-search-form-label{margin-bottom:4px}.bt-search-form-field{padding:4px 0}.bt-search-form-right{margin-left:auto!important}",""])},1610:function(e,t,a){var n=a(5);e.exports=(n.default||n).template({1:function(e,t,a,n){var r=this.lambda,l=this.escapeExpression;return'      <pre class="js-task-scanner-context">'+l(r(null!=e?e.scannerContext:e,e))+"</pre>\n"},3:function(e,t,a,n){return'      <i class="spinner"></i>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var l,s=this.escapeExpression,o=this.lambda,u='<form id="deactivate-user-form" autocomplete="off">\n  <div class="modal-head">\n    <h2>'+s(a(3).call(e,"background_tasks.scanner_context",{name:"t",hash:{},data:r}))+": "+s(o(null!=(l=null!=e?e.task:e)?l.componentName:l,e))+" ["+s(a(3).call(e,"background_task.type",null!=(l=null!=e?e.task:e)?l.type:l,{name:"t",hash:{},data:r}))+']</h2>\n  </div>\n  <div class="modal-body modal-container">\n    <div class="js-modal-messages"></div>\n\n';return l=t.if.call(e,null!=e?e.scannerContext:e,{name:"if",hash:{},fn:this.program(1,r),inverse:this.program(3,r),data:r}),null!=l&&(u+=l),u+'  </div>\n  <div class="modal-foot">\n    <a href="#" class="js-modal-close">'+s(a(3).call(e,"close",{name:"t",hash:{},data:r}))+"</a>\n  </div>\n</form>\n"},useData:!0})},1611:function(e,t,a){var n=a(5);e.exports=(n.default||n).template({1:function(e,t,a,n){var r,l="";return r=t.if.call(e,null!=e?e.stacktrace:e,{name:"if",hash:{},fn:this.program(2,n),inverse:this.program(4,n),data:n}),null!=r&&(l+=r),l},2:function(e,t,n,r){var l=this.escapeExpression,s=this.lambda;return'        <h4 class="spacer-bottom">'+l(a(3).call(e,"background_tasks.error_stacktrace",{name:"t",hash:{},data:r}))+'</h4>\n        <pre class="js-task-stacktrace">'+l(s(null!=e?e.stacktrace:e,e))+"</pre>\n"},4:function(e,t,n,r){var l,s=this.escapeExpression,o=this.lambda;return'        <h4 class="spacer-bottom">'+s(a(3).call(e,"background_tasks.error_message",{name:"t",hash:{},data:r}))+'</h4>\n        <pre class="js-task-error-message">'+s(o(null!=(l=null!=e?e.task:e)?l.errorMessage:l,e))+"</pre>\n"},6:function(e,t,a,n){return'      <i class="spinner"></i>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var l,s=this.escapeExpression,o=this.lambda,u='<form id="deactivate-user-form" autocomplete="off">\n  <div class="modal-head">\n    <h2>'+s(a(3).call(e,"background_tasks.error_stacktrace",{name:"t",hash:{},data:r}))+": "+s(o(null!=(l=null!=e?e.task:e)?l.componentName:l,e))+" ["+s(a(3).call(e,"background_task.type",null!=(l=null!=e?e.task:e)?l.type:l,{name:"t",hash:{},data:r}))+']</h2>\n  </div>\n  <div class="modal-body modal-container">\n    <div class="js-modal-messages"></div>\n\n';return l=t.if.call(e,null!=e?e.loaded:e,{name:"if",hash:{},fn:this.program(1,r),inverse:this.program(6,r),data:r}),null!=l&&(u+=l),u+'  </div>\n  <div class="modal-foot">\n    <a href="#" class="js-modal-close">'+s(a(3).call(e,"close",{name:"t",hash:{},data:r}))+"</a>\n  </div>\n</form>\n"},useData:!0})},1904:function(e,t,a){var n=a(1549);"string"==typeof n&&(n=[[e.id,n,""]]);a(23)(n,{});n.locals&&(e.exports=n.locals)}});